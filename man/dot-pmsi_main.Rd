% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pmsi.R
\name{.pmsi_main}
\alias{.pmsi_main}
\title{Extract the main (stay-level) PMSI table}
\usage{
.pmsi_main(data)
}
\arguments{
\item{data}{A tibble produced by `.pmsi_prepare()`.}
}
\value{
A tibble containing the intersection of `data` with the standard
  stay-level columns, deduplicated with `distinct()`.
}
\description{
Selects a standard set of stay-level variables from prepared PMSI data and
returns one row per distinct stay.
}
\details{
Intended to be applied after `.pmsi_prepare()`, which parses `DATENT/DATSORT`
and populates `HEURE_*` columns.


Columns are selected with `dplyr::any_of()`: missing columns are silently
ignored (useful when PMSI payloads vary by endpoint/version).
}
\examples{
cleaned <- .pmsi_prepare(list(list(PATID="P1", EVTID="E1", DATENT="2020-01-01")))
main <- .pmsi_main(cleaned)

}
\keyword{internal}
