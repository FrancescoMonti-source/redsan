% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pmsi.R
\name{process_pmsi}
\alias{process_pmsi}
\title{Process PMSI stays into analysis-ready tables}
\usage{
process_pmsi(data)
}
\arguments{
\item{data}{List of PMSI API entries (one list per stay).}
}
\value{
A list with tibbles `main`, `actes`, and `diag`.
}
\description{
Flattens PMSI stay payloads and returns three tables:
\describe{
  \item{`main`}{one row per stay (stay-level variables)}
  \item{`actes`}{actes in long format (one row per acte)}
  \item{`diag`}{diagnoses derived from `DALL` (one row per token)}
}
}
\details{
`DATENT` and `DATSORT` are parsed to `POSIXct` and corresponding `HEURE_*`
columns are derived as `hms` times when the raw input included an explicit
time component.
}
\examples{
example_data <- list(
  list(
    PATID = "P1",
    EVTID = "E1",
    ELTID = "L1",
    DATENT = "2020-01-01T08:30:00",
    DATSORT = "2020-01-02T10:15:00",
    PATBD = "1980-01-01",
    PATAGE = "40",
    PATSEX = "M",
    SEJDUR = "2",
    SEJUM = "2020-01-01",
    SEJUF = "2020-01-02",
    DALL = "01:AA 02:BB",
    CODEACTE1 = "A123",
    DATEACTE1 = "2020-01-01T09:00:00",
    UFPRO1 = "01"
  )
)
pmsi <- process_pmsi(example_data)
pmsi$main
pmsi$actes
pmsi$diag

}
